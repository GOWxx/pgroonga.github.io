msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

msgid ""
"---\n"
"title: pgroonga_highlight_html function\n"
"upper_level: ../\n"
"---"
msgstr ""

msgid "# `pgroonga_highlight_html` function"
msgstr ""

msgid "Since 1.0.7."
msgstr ""

msgid "## Summary"
msgstr ""

msgid "`pgroonga_highlight_html` function surrounds the specified keywords in the specified text by `<span class=\"keyword\">` and `</span>`. HTML special characters such as `&` in the specified text are escaped."
msgstr ""

msgid "## Syntax"
msgstr ""

msgid "There are two signatures:"
msgstr ""

msgid ""
"```text\n"
"text pgroonga_highlight_html(target, ARRAY[keyword1, keyword2, ...])\n"
"text pgroonga_highlight_html(target, ARRAY[keyword1, keyword2, ...], index_name)\n"
"text[] pgroonga_highlight_html(ARRAY[target1, target2, ...],\n"
"                               ARRAY[keyword1, keyword2, ...])\n"
"text[] pgroonga_highlight_html(ARRAY[target1, target2, ...],\n"
"                               ARRAY[keyword1, keyword2, ...], index_name)\n"
"```"
msgstr ""

msgid "The first signature is simpler than others. The first signature is enough for most cases."
msgstr ""

msgid "The second signature is useful when you use custom normalizer."
msgstr ""

msgid "The second signature is available since 2.0.7."
msgstr ""

msgid "The third and fourth signatures are `text[]` versions of the first and second signatures."
msgstr ""

msgid "The third and fourth signatures are available since 2.4.3."
msgstr ""

msgid "Here is the description of the first signature."
msgstr ""

msgid ""
"```text\n"
"text pgroonga_highlight_html(target, ARRAY[keyword1, keyword2, ...])\n"
"```"
msgstr ""

msgid "`target` is a text to be highlighted. It's `text` type."
msgstr ""

msgid "`keyword1`, `keyword2`, `...` are keywords to be highlighted. They're an array of `text` type. You must specify one or more keywords."
msgstr ""

msgid "`pgroonga_highlight_html` markups the keywords in `target`. It's type is `text` type."
msgstr ""

msgid "The keywords are surrounded with `<span class=\"keyword\">` and `</span>`. `<`, `>`, `&` and `\"` in `target` is HTML escaped."
msgstr ""

msgid "Here is the description of the second signature."
msgstr ""

msgid ""
"```text\n"
"text pgroonga_highlight_html(target, ARRAY[keyword1, keyword2, ...], index_name)\n"
"```"
msgstr ""

msgid "`index_name` is an index name of the corresponding PGroonga index. It's `text` type."
msgstr ""

msgid "`index_name` can be `NULL`."
msgstr ""

msgid "If you aren't using `NormalizerAuto` normalizer such as `NormalizerNFKC100`, it's better that you use `index_name`. This function uses `NormalizerAuto` normalizer by default. It may cause unexpected result."
msgstr ""

msgid "If you specify `index_name`, the specified PGroonga index must have `TokenNgram` tokenizer with `\"report_source_location\"` option."
msgstr ""

msgid "Here is an example:"
msgstr ""

msgid ""
"```sql\n"
"CREATE TABLE memos (\n"
"  content text\n"
");"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_content_index\n"
"          ON memos\n"
"       USING pgroonga (content)\n"
"        WITH (tokenizer='TokenNgram(\"report_source_location\", true)',\n"
"              normalizer='NormalizerNFKC100');\n"
"```"
msgstr ""

msgid "Now, you can use `pgroonga_content_index` as `index_name`:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('one two three four five',\n"
"                               ARRAY['two three', 'five'],\n"
"                               'pgroonga_content_index');\n"
"--                               pgroonga_highlight_html                              \n"
"-- -----------------------------------------------------------------------------------\n"
"--  one<span class=\"keyword\"> two three</span> four<span class=\"keyword\"> five</span>\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "It's available since 2.0.7."
msgstr ""

msgid "Here is the description of the third signature."
msgstr ""

msgid ""
"```text\n"
"text[] pgroonga_highlight_html(ARRAY[target1, target2, ...],\n"
"                               ARRAY[keyword1, keyword2, ...])\n"
"```"
msgstr ""

msgid "`target1`, `target2`, `...` are texts to be highlighted. They're an array of `text` type."
msgstr ""

msgid "`pgroonga_highlight_html` markups the keywords in for each `target`. `pgroonga_highlight_html` returns an array of `text` type. If a `target` is `NULL`, corresponding element in the returned array is also `NULL`."
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html(ARRAY['one two three', NULL, 'five', 'six three'],\n"
"                               ARRAY['two three', 'six']);\n"
"--                                         pgroonga_highlight_html                                        \n"
"-- -------------------------------------------------------------------------------------------------------\n"
"--  {\"one<span class=\\\"keyword\\\"> two three</span>\",NULL,five,\"<span class=\\\"keyword\\\">six</span> three\"}\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "It's available since 2.4.2."
msgstr ""

msgid "Here is the description of the fourth signature."
msgstr ""

msgid ""
"```text\n"
"text[] pgroonga_highlight_html(ARRAY[target1, target2, ...],\n"
"                               ARRAY[keyword1, keyword2, ...],\n"
"                               index_name)\n"
"```"
msgstr ""

msgid "See also the example of the second signature and the third signature."
msgstr ""

msgid "## Usage"
msgstr ""

msgid "You need to specify at least one keyword:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('PGroonga is a PostgreSQL extension.',\n"
"                               ARRAY['PostgreSQL']) AS highlight_html;\n"
"--                           highlight_html                          \n"
"-- ------------------------------------------------------------------\n"
"--  PGroonga is a <span class=\"keyword\">PostgreSQL</span> extension.\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "You can specify multiple keywords:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('PGroonga is a PostgreSQL extension.',\n"
"                               ARRAY['Groonga', 'PostgreSQL']) AS highlight_html;\n"
"--                                         highlight_html                                         \n"
"-- -----------------------------------------------------------------------------------------------\n"
"--  P<span class=\"keyword\">Groonga</span> is a <span class=\"keyword\">PostgreSQL</span> extension.\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "You can extract keywords from query by [`pgroonga_query_extract_keywords` function](pgroonga-query-extract-keywords.html):"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('PGroonga is a PostgreSQL extension.',\n"
"                               pgroonga_query_extract_keywords('Groonga PostgreSQL -extension')) AS highlight_html;\n"
"--                                         highlight_html                                         \n"
"-- -----------------------------------------------------------------------------------------------\n"
"--  P<span class=\"keyword\">Groonga</span> is a <span class=\"keyword\">PostgreSQL</span> extension.\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "HTML special characters are escaped automatically:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('<p>PGroonga is Groonga & PostgreSQL.</p>',\n"
"                               ARRAY['PostgreSQL']) AS highlight_html;\n"
"--                                     highlight_html                                     \n"
"-- ---------------------------------------------------------------------------------------\n"
"--  &lt;p&gt;PGroonga is Groonga &amp; <span class=\"keyword\">PostgreSQL</span>.&lt;/p&gt;\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "Characters are normalized:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('PGroonga + pglogical = replicatable!',\n"
"                               ARRAY['Pg']) AS highlight_html;\n"
"--                                     highlight_html                                         \n"
"-- ------------------------------------------------------------------------------------------------\n"
"--  <span class=\"keyword\">PG</span>roonga + <span class=\"keyword\">pg</span>logical = replicatable!\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "Multibyte characters are also supported:"
msgstr ""

msgid ""
"```sql\n"
"SELECT pgroonga_highlight_html('10㌖先にある100ｷﾛグラムの米',\n"
"                               ARRAY['キロ']) AS highlight_html;\n"
"--                                     highlight_html                                     \n"
"-- ---------------------------------------------------------------------------------------\n"
"--  10<span class=\"keyword\">㌖</span>先にある100<span class=\"keyword\">ｷﾛ</span>グラムの米\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "Custom tokenizer and normalizer can be used by specifying a PGroonga index name:"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_content_index\n"
"          ON memos\n"
"       USING pgroonga (content)\n"
"        WITH (tokenizer='TokenNgram(\"report_source_location\", true)',\n"
"              normalizer='NormalizerNFKC100');"
msgstr ""

msgid ""
"SELECT pgroonga_highlight_html('one two three four five',\n"
"                               ARRAY['two three', 'five'],\n"
"                               'pgroonga_content_index');\n"
"--                               pgroonga_highlight_html                              \n"
"-- -----------------------------------------------------------------------------------\n"
"--  one<span class=\"keyword\"> two three</span> four<span class=\"keyword\"> five</span>\n"
"-- (1 row)\n"
"```"
msgstr ""

msgid "## Practical example 1: keyword search and highlight"
msgstr ""

msgid "Here is an example of implementing keyword search feature with `pgroonga_highlight_html`."
msgstr ""

msgid "Imagine you are building a blog, and for simplicity, this blog's post model only has `id`, `title` and `body` fields."
msgstr ""

msgid ""
"```sql\n"
"CREATE TABLE posts (\n"
"  id SERIAL NOT NULL,\n"
"  title varchar(255),\n"
"  body text\n"
");"
msgstr ""

msgid ""
"-- Create PGroonga Index\n"
"CREATE INDEX pgroonga_posts_index\n"
"          ON posts\n"
"       USING pgroonga (title, body);"
msgstr ""

msgid ""
"-- Insert some sample data\n"
"INSERT INTO posts VALUES (1, 'Quote of the day one', 'Design is not just what it looks like and feels like. Design is how it works.');\n"
"INSERT INTO posts VALUES (2, 'Quote of the day two', 'If everyone is busy making everything, how can any one perfect anything?');\n"
"INSERT INTO posts VALUES (3, 'Quote of the day three', 'There are a thousand no''s, for every yes.');\n"
"```"
msgstr ""

msgid "Then you may use `pgroonga_highlight_html` function to search through your blog posts, and get the result with keywords highlighted like this:"
msgstr ""

msgid ""
"```sql\n"
"SELECT\n"
"   pgroonga_highlight_html(title, pgroonga_query_extract_keywords('thousand')) AS highlighted_title,\n"
"   pgroonga_highlight_html(body, pgroonga_query_extract_keywords('thousand')) AS highlighted_body\n"
"   from posts where title &@~ 'thousand' or body &@~ 'thousand';"
msgstr ""

msgid ""
"--    highlighted_title    |                            highlighted_body                            \n"
"-- ------------------------+------------------------------------------------------------------------\n"
"--  Quote of the day three | There are a <span class=\"keyword\">thousand</span> no's, for every yes.\n"
"--  (1 row)\n"
"```"
msgstr ""

msgid "If you have a lot of data to search through and return the result with pagination, it is not wise to use `pgroonga_highlight_html()` on that query. Because `pgroonga_highlight_html()` only works in sequentially, the more number of records for processing in `pgroonga_highlight_html()` you have, slower it gets in performance."
msgstr ""

msgid "To avoid this problem, in the following example, we reduce the number of records for processing in `pgroonga_highlight_html()` by using `pgroonga_highlight_html()` on the result of your keyword search instead."
msgstr ""

msgid ""
"```sql\n"
"-- Good Performance\n"
"SELECT\n"
"   pgroonga_highlight_html(title, pgroonga_query_extract_keywords('Search Words')) AS highlighted_title,\n"
"   pgroonga_highlight_html(body, pgroonga_query_extract_keywords('Search Words')) AS highlighted_body\n"
"   from posts where id IN\n"
"   (SELECT id FROM posts where title &@~ 'Search Words' or body &@~ 'Search Words' LIMIT 10 OFFSET 100);"
msgstr ""

msgid ""
"-- Do not do this. You may experience some performance issue.\n"
"SELECT\n"
"   pgroonga_highlight_html(title, pgroonga_query_extract_keywords('Search Words')) AS highlighted_title,\n"
"   pgroonga_highlight_html(body, pgroonga_query_extract_keywords('Search Words')) AS highlighted_body\n"
"   from posts where title &@~ 'Search Words' or body &@~ 'Search Words' LIMIT 10 OFFSET 100;\n"
"```"
msgstr ""

msgid "## Practical example 2: keyword search and highlight using with `NormalizerTable`"
msgstr ""

msgid "If you specify `NormalizerTable`, like in this `CREATE INDEX USING pgroonga` document ([How to use `NormalizerTable` with `pgroonga_highlight_html` section][create-index-using-pgroonga-normalizer-table-highlight-html]), the specified PGroonga index must have not only `TokenNgram` with `\"report_source_location\", true\"` option but also both `NormalizerNFKC*` and `NormalizerTable` with `\"report_source_offset\", true\"` option for each."
msgstr ""

msgid "Here is an example (We use Japanese Name 'Saito' (`斉藤`) which has many variants):"
msgstr ""

msgid ""
"CREATE TABLE synonyms (\n"
"   \"target\" text not null,\n"
"   \"normalized\" text not null\n"
");"
msgstr ""

msgid ""
"INSERT INTO synonyms VALUES ('齊', '斉');\n"
"INSERT INTO synonyms VALUES ('斎', '斉');\n"
"INSERT INTO synonyms VALUES ('齋', '斉');"
msgstr ""

msgid ""
"INSERT INTO memos  (content)  VALUES ('斎藤さんの恋愛');\n"
"INSERT INTO memos  (content)  VALUES ('斉藤さんの失恋');\n"
"INSERT INTO memos  (content)  VALUES ('齋藤さんの片想い');"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_synonyms_index ON synonyms\n"
" USING pgroonga (target pgroonga_text_term_search_ops_v2)\n"
"                INCLUDE (normalized);"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_memos_index\n"
"          ON memos\n"
"       USING pgroonga (content)\n"
"        WITH (\n"
"         tokenizer='TokenNgram(\n"
"                      \"unify_alphabet\", false,\n"
"                      \"unify_symbol\", false,\n"
"                      \"unify_digit\", false,\n"
"                      \"report_source_location\", true\n"
"                    )',\n"
"         normalizers='\n"
"               NormalizerNFKC150(\"report_source_offset\", true),\n"
"               NormalizerTable(\n"
"                 \"normalized\", \"${table:pgroonga_synonyms_index}.normalized\", \n"
"                 \"target\", \"target\",\n"
"                 \"report_source_offset\", true\n"
"               )'\n"
"            );\n"
"```"
msgstr ""

msgid ""
"```sql\n"
"select pgroonga_highlight_html(content, '{斉藤}', 'pgroonga_memos_index')\n"
"                  from memos where content &@~ '斉藤';\n"
"--             pgroonga_highlight_html            \n"
"-- -----------------------------------------------\n"
"--  <span class=\"keyword\"></span>斎藤さんの恋愛\n"
"--  <span class=\"keyword\"></span>斉藤さんの失恋\n"
"--  <span class=\"keyword\"></span>齋藤さんの片想い\n"
"-- (3 rows)\n"
"```"
msgstr ""

msgid "## See also"
msgstr ""

msgid "  * [`pgroonga_query_extract_keywords` function][query-extract-keywords]"
msgstr ""

msgid ""
"[query-extract-keywords]:pgroonga-query-extract-keywords.html\n"
"[create-index-using-pgroonga-normalizer-table-highlight-html]:../create-index-using-pgroonga.html#normalizer-table-highlight-html"
msgstr ""
